package best.lettuce.modules.impl.exploit;

import best.lettuce.event.base.EventListener;
import best.lettuce.event.impl.network.EventPacketReceive;
import best.lettuce.modules.Category;
import best.lettuce.modules.Module;
import best.lettuce.utils.packet.PacketUtils;
import net.minecraft.network.play.client.C0DPacketCloseWindow;
import net.minecraft.network.play.server.S2EPacketCloseWindow;

public class AntiGuiClose extends Module {
    public AntiGuiClose(){
        super("Anti Gui Close", Category.EXPLOIT, "Prevent server from closing your gui.");
    }

    public EventListener<EventPacketReceive> onPacketReceive = event -> {
      if(event.getPacket() instanceof S2EPacketCloseWindow){
          event.setCancelled(true);
          PacketUtils.sendPacketNoEvent(new C0DPacketCloseWindow(mc.thePlayer.openContainer.windowId));
      }
    };
}
